@using System.Web.WebPages.Instrumentation
@{
    ViewBag.Title = "select_food";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/Styles/diet.css" rel="stylesheet" type="text/css"/>

<div class="box">
    <div class="box-header">
        <h3 class="box-title">Search products</h3>
    </div>
    <div class="box-body">
        <form id="search-form" method="get" data-ajax="true" data-ajax-target="#SekcjaListaKategori">
            <input id="search-filter" type="search" name="searchQuery"
                   data-autocomplete-source="@Url.Action("ProductHints")"
                   placeholder="Wprowadź tekst, aby wyfiltrować..."/>
            <input type="submit" value="Search"/>
        </form>

    </div>
</div>

<div class="col-1">
    <ul id="matching">
        @foreach (var position in Model)
        {
            <li class="matched-food" id= @position.ProductId.ToString(), meal=@position.Name >
               
                @position.Name
                <p class="search-nutritional-info">

                    Calories: @position.Calories
                    Fat: @position.Fat
                    Carbs: @position.Carbs
                    Protein: @position.Protein
                </p>

            </li>
        }

    </ul>

</div>

<form accept-charset="UTF-8" action="/food/add" id="food-nutritional-details-form" method="post">
    <div id="servings" class="col-1 block-1">
        <div id="loaded_item">
            <input id="food_entry_food_id" name="food_entry[food_id]" type="hidden" value="394962625">
            <input id="food_entry_date" name="food_entry[date]" type="hidden" value="2017-04-15">

            <p class="food-description"><label id="name">Some text field</label></p>

            <div class="verified-food-container">
                <div class="verified"></div>
                <span class="verified-text verified-nutritional_info">
                    <a href="http://myfitnesspal.desk.com/customer/portal/articles/1859089" target="_blank">Learn more</a>
                </span>
            </div>
            <div class="user_submitted"></div>


            <p></p>

            <h3 class="secondary-title">How much?</h3>

            <input id="food_entry_quantity" autocomplete="off" class="text short" name="food_entry[quantity]" size="30" type="text" value="1.0">
            servings of

            <select id="food_entry_weight_id" class="select" name="food_entry[weight_id]">
                <option value="0">1 pieces</option>
                <option value="1" selected="selected">1 gram</option>
                <option value="2">100 gram</option>
            </select>
            <p></p>
            <p></p>
            <h3 class="secondary-title">To which meal?</h3>
            <select class="select" id="food_entry_meal_id" name="food_entry[meal_id]">
                <option value="0" selected="selected">
                    Breakfast
                </option>
                <option value="1">
                    Lunch
                </option>
                <option value="2">
                    Dinner
                </option>
                <option value="3">
                    Snacks
                </option>
            </select>

            <p></p>

            <input id="update_servings" type="submit" value="Add Food To Diary" class="button log" data-food-id="394962625" data-external-id="28483697766061" data-version-id="194215896042541">

        </div>

        <div id="loading" style="display: none;">
            <img alt="Ajax-loader" src="http://d34yn14tavczy0.cloudfront.net/assets/ajax-loader-50c838b217beb2ca865f50f9b4a3932d.gif">
        </div>
    </div>
</form>
<script src="~/Scripts/jquery-3.1.1.js"></script>
<script src="~/Scripts/jquery-ui-1.12.1.js"></script>
<script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
<script src="~/Scripts/jquery-3.1.1.min.js"></script>
<script src="~/Scripts/jquery-3.1.1.intellisense.js"></script>

<script>
    var value1 = '0';
    var value2 = '0';

    $('.col-1 li').click(function() {
        value2 = $(this).attr('id');
        value1 = $(this).attr('meal');
        document.getElementById("name").innerText=value1;


    });
    $(function() {

        var setupAutoComplete = function() {
            var $input = $(this);

            var options =
            {
                source: $input.attr("data-autocomplete-source"),
                select: function(event, ui) {
                    $input = $(this);
                    $input.val(ui.item.label);
                    var $form = $input.parents("form:first");
                    $form.submit();
                }
            };

            $input.autocomplete(options);
        };

        var ajaxSubmit = function() {

            var $form = $(this);

            var settings = {
                data: $(this).serialize(),
                url: $(this).attr("action"),
                type: $(this).attr("method")
            };

            $.ajax(settings).done(function(result) {
                var $targetElement = $($form.data("ajax-target"));
                var $newContent = $(result);
                $($targetElement).replaceWith($newContent);
                $newContent.effect("slide");
            });

            return false;
        };

        $("#search-filter").each(setupAutoComplete);
        $("#search-form").submit(ajaxSubmit);
    });
</script>